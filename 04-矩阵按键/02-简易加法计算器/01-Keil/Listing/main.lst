C51 COMPILER V9.01   MAIN                                                                  11/23/2022 20:39:44 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN ..\Output\main.obj
COMPILER INVOKED BY: E:\Program Files (x86)\Keil\C51\BIN\C51.EXE ..\Source\main.c BROWSE DEBUG OBJECTEXTEND PRINT(..\Lis
                    -ting\main.lst) OBJECT(..\Output\main.obj)

line level    source

   1          #include <reg52.h>
   2          #include "matrixkey.h"
   3          #include "display.h"
   4          #include "delay.h"
   5          
   6          unsigned char KeypressFlag = 0;
   7          unsigned char DisNumFlag = 0;
   8          unsigned char Num = 0; 
   9          unsigned int temp = 0;
  10          unsigned int Number1 = 0;
  11          unsigned int Result = 0;
  12          
  13          void Distemp_Service();
  14          void DisNumber1_Service();
  15          void DisResult_Service();
  16          
  17          void INT0_int()
  18          {
  19   1          IT0 = 1;
  20   1          EX0 = 1;
  21   1          EA  = 1;
  22   1      
  23   1      }
  24          
  25          void ESR_INT0() interrupt 0
  26          {
  27   1         DelayXms(10);
  28   1         if(0 == INT0)
  29   1         {
  30   2            KeypressFlag = 1;
  31   2         }
  32   1        
  33   1      
  34   1      }
  35          
  36          
  37          void main()
  38          {  
  39   1         unsigned char Addflag = 0;
  40   1         INT0_int();
  41   1         P1 = 0x0f;
  42   1      
  43   1         while(1)
  44   1         {    
  45   2             if(KeypressFlag == 1)
  46   2             {
  47   3                KeypressFlag = 0;
  48   3                
  49   3                switch(MatrixKey_Scan())
  50   3                 {
  51   4                    case 0:  if(1 == Addflag) {temp = 0;}
  52   4                             else {temp = temp*10 + MatrixKey_Scan(); }DisNumFlag = 22;Addflag  = 1;break;
  53   4                    case 1:  if(!Addflag) {temp = 1;Addflag  = 1;}
  54   4                             else {temp = temp*10 + MatrixKey_Scan(); }DisNumFlag = 22;break;
C51 COMPILER V9.01   MAIN                                                                  11/23/2022 20:39:44 PAGE 2   

  55   4                    case 2:  if(!Addflag) {temp = 2;Addflag  = 1;}
  56   4                             else {temp = temp*10 + MatrixKey_Scan(); }DisNumFlag = 22;break;
  57   4                    case 3:  if(!Addflag) {temp = 3;Addflag  = 1;}
  58   4                             else {temp = temp*10 + MatrixKey_Scan(); }DisNumFlag = 22;break;
  59   4                    case 4:  if(!Addflag) {temp = 4;Addflag  = 1;}
  60   4                             else {temp = temp*10 + MatrixKey_Scan(); }DisNumFlag = 22;break;
  61   4                    case 5:  if(!Addflag) {temp = 5;Addflag  = 1;}
  62   4                             else {temp = temp*10 + MatrixKey_Scan(); }DisNumFlag = 22;break;
  63   4                    case 6:  if(!Addflag) {temp = 6;Addflag  = 1;}
  64   4                             else {temp = temp*10 + MatrixKey_Scan(); }DisNumFlag = 22;break;
  65   4                    case 7:  if(!Addflag) {temp = 7;Addflag  = 1;}
  66   4                             else {temp = temp*10 + MatrixKey_Scan(); }DisNumFlag = 22;break;
  67   4                    case 8:  if(!Addflag) {temp = 8;Addflag  = 1;}
  68   4                             else {temp = temp*10 + MatrixKey_Scan(); }DisNumFlag = 22;break;
  69   4                    case 9:  if(!Addflag) {temp = 9;Addflag  = 1;}
  70   4                             else {temp = temp*10 + MatrixKey_Scan(); }DisNumFlag = 22;break;
  71   4              
  72   4                    case 12: Number1 = temp; temp = 0;Addflag  = 0;
  73   4                             DisNumFlag = 25;
  74   4                             break;
  75   4                    case 14: Number1 = 0; temp = 0;Addflag  = 0;
  76   4                             DisNumFlag = 25;
  77   4                             break;
  78   4          
  79   4                    case 15: Result = Number1 + temp; Addflag  = 0;
  80   4                             DisNumFlag = 30;
  81   4                             break;
  82   4              
  83   4                    default: break;       
  84   4                  }
  85   3                  
  86   3                                   
  87   3                  if(22 == DisNumFlag) 
  88   3                      {
  89   4                       Distemp_Service(); 
  90   4                      } 
  91   3                  if(25 == DisNumFlag) 
  92   3                      {
  93   4                       DisNumber1_Service(); 
  94   4                      } 
  95   3                  if(30 == DisNumFlag) 
  96   3                      {
  97   4                       DisResult_Service(); 
  98   4                      }  
  99   3             
 100   3             }
 101   2                              
 102   2             Display(); 
 103   2              
 104   2          }
 105   1      }
 106          
 107          void Distemp_Service()
 108          {
 109   1             LEDBuf[0] = 22;
 110   1             LEDBuf[1] = temp/1000000;
 111   1             LEDBuf[2] = temp/100000%10;
 112   1             LEDBuf[3] = temp/10000%10;
 113   1             LEDBuf[4] = temp/1000%10;
 114   1             LEDBuf[5] = temp/100%10;
 115   1             LEDBuf[6] = temp/10%10;
 116   1             LEDBuf[7] = temp%10;
C51 COMPILER V9.01   MAIN                                                                  11/23/2022 20:39:44 PAGE 3   

 117   1      
 118   1      }
 119          void DisNumber1_Service()
 120          {
 121   1             LEDBuf[0] = 22;
 122   1             LEDBuf[1] = Number1/1000000;
 123   1             LEDBuf[2] = Number1/100000%10;
 124   1             LEDBuf[3] = Number1/10000%10;
 125   1             LEDBuf[4] = Number1/1000%10;
 126   1             LEDBuf[5] = Number1/100%10;
 127   1             LEDBuf[6] = Number1/10%10;
 128   1             LEDBuf[7] = Number1%10;
 129   1      
 130   1      }
 131          void DisResult_Service()
 132          {
 133   1             LEDBuf[0] = 22;
 134   1             LEDBuf[1] = Result/1000000;
 135   1             LEDBuf[2] = Result/100000%10;
 136   1             LEDBuf[3] = Result/10000%10;
 137   1             LEDBuf[4] = Result/1000%10;
 138   1             LEDBuf[5] = Result/100%10;
 139   1             LEDBuf[6] = Result/10%10;
 140   1             LEDBuf[7] = Result%10;
 141   1      
 142   1      }       
 143          
 144          
 145          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1108    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      9       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
